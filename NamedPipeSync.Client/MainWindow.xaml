<mah:MetroWindow x:Class="NamedPipeSync.Client.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:viewModels="clr-namespace:NamedPipeSync.Client.ViewModels"
                 xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
                 xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                 mc:Ignorable="d"
                 d:DataContext="{d:DesignInstance Type=viewModels:MainWindowClientViewModel, IsDesignTimeCreatable=True}"
                 Title="{Binding Title}"
                 Left="{Binding WindowLeft, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                 Top="{Binding WindowTop, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
    <!-- Background bound to an ImageBrush (via ImageSource) -->
    <mah:MetroWindow.Background>
        <ImageBrush ImageSource="{Binding BackgroundImage}"
                    Stretch="UniformToFill" />
    </mah:MetroWindow.Background>

    <!-- Style that toggles the window chrome based on BorderIsVisible -->
    <mah:MetroWindow.Style>
        <Style TargetType="mah:MetroWindow">
            <!-- default: do not use the 'none' MetroWindow style (show chrome) -->
            <Setter Property="mah:MetroWindow.UseNoneWindowStyle" Value="False"/>
            <Style.Triggers>
                <!-- when BorderIsVisible == false remove the caption and border -->
                <DataTrigger Binding="{Binding BorderIsVisible}" Value="False">
                    <Setter Property="mah:MetroWindow.UseNoneWindowStyle" Value="True"/>
                </DataTrigger>
                <!-- when BorderIsVisible == true ensure the caption and border are shown -->
                <DataTrigger Binding="{Binding BorderIsVisible}" Value="True">
                    <Setter Property="mah:MetroWindow.UseNoneWindowStyle" Value="False"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </mah:MetroWindow.Style>

    <dxmvvm:Interaction.Triggers>
        <dxmvvm:EventToCommand EventName="Loaded" Command="{Binding LoadedCommand}" />
    </dxmvvm:Interaction.Triggers>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Show the current ShowMode in a row above the main centered content -->
        <TextBlock Grid.Row="1"
                   Text="{Binding ShowMode}"
                   Foreground="LightBlue"
                   FontSize="18"
                   HorizontalAlignment="Center"
                   Margin="0,8,0,0"
                   TextAlignment="Center" />

        <StackPanel Grid.Row="2"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
            <TextBlock x:Name="ClientText"
                       Text="{Binding ClientText}"
                       Foreground="Orange"
                       FontSize="32"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       TextAlignment="Center" />
            <TextBlock x:Name="DateTimeText"
                       Margin="0,12,0,0"
                       HorizontalAlignment="Center"
                       FontSize="18"
                       TextAlignment="Center"
                       Text="2025-09-25" />
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,16,0,0">
                <Button x:Name="ConnectButton"
                        Margin="0,0,8,0"
                        Padding="16,8"
                        Content="Connect"
                        Command="{Binding ConnectCommand}" />
                <Button x:Name="DisconnectButton"
                        Margin="0,0,8,0"
                        Padding="16,8"
                        Content="Disconnect"
                        Command="{Binding DisconnectCommand}" />
                <Button x:Name="ExitButton"
                        Padding="16,8"
                        Content="Exit"
                        Command="{Binding ExitCommand}" />
            </StackPanel>
        </StackPanel>
    </Grid>
</mah:MetroWindow>
